<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.google.pronect.dao.GroupBoardReplyDao">
	<resultMap type="GroupBoardReply" id="Map">
		<result property="group_repid" column="GROUP_REPID"/>
		<result property="group_bid" column="GROUP_BID"/>
		<result property="mid" column="MID"/>
		<result property="group_board_rep_content" column="GROUP_BOARD_REP_CONTENT"/>
		<result property="group_board_rep_like" column="GROUP_BOARD_REP_LIKE"/>
		<result property="group_board_rep_rdate" column="GROUP_BOARD_REP_RDATE"/>
	</resultMap>
	<select id="groupBoardReplyList" parameterType="GroupBoardReply" resultMap="Map">
			SELECT * FROM (SELECT ROWNUM RN, A.*
    		FROM (SELECT * FROM GROUP_BOARD_REPLY 
    		WHERE GROUP_REPID = #{group_repid} ORDER BY GROUP_BOARD_REP_RDATE) A)
			    WHERE RN BETWEEN #{startRow} AND #{endRow}
	</select>
	<select id="totCntGroupBoardReply" resultType="int">
			SELECT COUNT(*) FROM GROUP_BOARD_REPLY WHERE GROUP_BID = #{group_bid}
	</select>
	<insert id="writeGroupBoardReply" parameterType="GroupBoardReply">
		INSERT INTO GROUP_BOARD_REPLY VALUES (GROUP_BOARD_REP_SEQ.NEXTVAL, #{group_bid}, #{mid}, #{group_board_rep_content}, 0, SYSDATE)
	</insert>
	<update id="modifyGroupBoardReply" parameterType="GroupBoardReply">
		UPDATE GROUP_BOARD_REPLY SET GROUP_BOARD_REP_CONTENT = #{group_board_rep_content},
                            GROUP_BOARD_REP_RDATE = SYSDATE 
                        WHERE GROUP_REPID = #{group_repid}
	</update>
	<delete id="deleteGroupBoardReply" parameterType="int">
		DELETE FROM GROUP_BOARD_REPLY WHERE GROUP_REPID = #{group_repid}
	</delete>
</mapper>